-*- Mode: Outline -*-

* gcc/g++
** Forcing static linking with later return to dynamic.
*** E.g. linking libFoo.a
gcc ... -Wl -Bstatic -lFoo -Wl -Bdynamic ...
** Get info on builtin include search dirs and predefined definitions
*** C
$ touch empty.c
$ gcc -v -dD -E empty.c
*** C++
$ touch empty.cpp
$ g++ -v -dD -E empty.cpp
** Declare function attributes
Declare the attribute between the return value and the name
** e.g. function that does not return
void __attribute__((noreturn)) dieFool() { /* fools die here */ }
*** e.g. function that is not always used
void  __attribute__((unused)) dbgDump(const SomeType&) { /* dump some debug data here */ }
*** How *NOT* to declare function attributes
DO NOT Need to declare the function with the attribute as suffix before
defining it.
**** e.g. function that does not return
void dieFool() __attribute__((noreturn));
void dieFool() { /* do something and then call exit */ }
**** e.g. function that takes an argument and does not return
void dieFool(const char*) __attribute__((noreturn));
void dieFool(const char* msg) { /* do something with msg and then call exit */ }
**** e.g. function that is not always used
void dbgDump(const SomeType&) __attribute__((unused));
void dbgDump(const SomeType& someValue) { /* dump debug info for someValue */ }
* clang/clang++
** dump AST
e.g. for file ast_test.cpp:
clang -Xclang -ast-dump -fsyntax-only ast_test.cpp
** clang-tidy
*** adding a new module of checks for clang-tidy
All examples assume module in directory "new_module" with name
"NewModule" and check name "NewCheck".
**** Create a directory for the new module
***** location
<llvm base directory>/tools/clang/tools/extra/clang-tidy/
**** Add the new directory as a subdirectory directive in clang-tidy main CMakeLists.txt
***** location
<llvm base directory>/tools/clang/tools/extra/clang-tidy/CMakeLists.txt
***** e.g. for module in directory "new_module"
add_subdirectory(new_module)
**** Add new ClangTidyModule subclass in module directory
e.g. NewModuleTidyModule.cpp
Rip from some existing module and modify.
**** Add new CMakeLists.txt in module directory
Rip from some existing module and modify.
***** NOTE
Call to add_clang_library should have a name specific to the new
module (e.g. clangTidyNewModule), this will be the library name.
**** Add new library to clang-tidy target_link_libraries
***** location
<llvm base directory>/tools/clang/tools/extra/clang-tidy/tool/CMakeLists.txt
***** library name
Same as the name used for add_clang_library in the previous step.
**** Add linker anchor to ClangTidyMain.cpp
Add after other similar declarations right before "namespace tidy" is
closed.
***** location
<llvm base directory>/tools/clang/tools/extra/clang-tidy/tool/ClangTidyMain.cpp
*** writing a clang-tidy check
All examples assume module in directory "new_module" with name
"NewModule" and check name "NewCheck".
**** run add_new_check.py
***** clang/tools/extra/clang-tidy/add_new_check.py
***** arguments are: <module name> <check name>
add_new_check.py new_module NewCheck
***** results
****** Adds new registration to the module's addCheckFactories member function.
****** Adds new .h and .cpp file inside the module directory
Check name has the string "Check" appended to the file names and the
class name.
****** Adds a new entry in the add_clang_library command of the module's CMakeLists.txt
**** review capitalization of added elements
capitalization does not necessarily agree with the value
provided to add_new_check.py so this should be reviewed.
